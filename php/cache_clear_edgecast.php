<?php/*The 4 variables below need to be set based on the account and path to purge.If you are unsure of what the path might look like, from within your edgeCastaccount, under the media type you wish you flush, go to 'My Edge' and dropdown the Purge URL field, these are what you would enter into the variable,with a trailing '/*' sans quotes to ensure the purge is recursive.*//* This script accepts a URL as it's argument, and can be fed using a loop, like                                                                                             so:for i in `cat urls_to_be_purged.txt` ; do php cdn_purge.php $i ; done*/$token = "9af6d09a-1250-4766-85bd-29cebf1c984f"; // Looks like: '51a0000e-1d50-7                                                                                            285-5976-1346a46794d0'$account = "4936"; // Looks like: '0A0A'$mediaPath = $argv[1]; // Looks like: 'http://wpc.0A0A.edgecastcdn.net/000A0A/ex                                                                                            ample.com/*'$mediaType = "8"; // 3 is HTTP Large, 8 is HTTP Small/* $token = "";// Looks like: '51a0000e-1d50-7285-5976-1346a46794d0' *//* //$account = "";// Looks like: '0A0A' *//* //$mediaPath = "";// Looks like: 'http://wpc.0A0A.edgecastcdn.net/000A0A/exam                                                                                            ple.com/*' *//* //$mediaType = "3";// 3 is HTTP Large, 8 is HTTP Small *//* Do not edit below this line */?><!DOCTYPE html><html><body><?phpif($token != "" && $account != "" && $mediaPath != "" && $mediaType != "") {//Setup variables$token = trim($token);$mediaPath = trim($mediaPath);$mediaType = trim($mediaType);$purgeURL = "https://api.edgecast.com/v2/mcc/customers/" . trim($account) . "/ed                                                                                            ge/purge";//Create send data$request_params = (object) array('MediaPath' => $mediaPath,'MediaType' => $mediaType);$data = json_encode($request_params);//Send the request to Edgecast$ch = curl_init();curl_setopt($ch, CURLOPT_URL, $purgeURL);curl_setopt($ch, CURLOPT_PORT , 443);curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);curl_setopt($ch, CURLOPT_HEADER, 0);curl_setopt($ch, CURLINFO_HEADER_OUT, 1);curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");curl_setopt($ch, CURLOPT_POSTFIELDS,$data);curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: tok:'.$token,'Content-Type: application/json','Accept: application/json','Content-length: '.strlen($data)));$head = curl_exec($ch);$httpCode = curl_getinfo($ch);curl_close($ch);//## check if errorif ($httpCode['http_code'] != 200){print("Error: <br />" . $head);}else {print("Success.  Cache for path ".$mediaPath." has been purged.");}}else {print("Error: <br />Not all 4 variables were configured.");}?></body>